# π’³ Pay ν”„λ΅μ νΈ

![Swagger](https://img.shields.io/badge/-Swagger-%23Clojure?style=for-the-badge&logo=swagger&logoColor=white)

AI κΈ°λ° κ²°μ  μ‚¬κΈ° νƒμ§€ μ‹μ¤ν…μ„ ν¬ν•¨ν• **κ²°μ  λ°±μ—”λ“**λ¥Ό μ§μ ‘ κµ¬ν„ν•λ” ν”„λ΅μ νΈμ…λ‹λ‹¤.

> β οΈ **ν„μ¬ μ—΄μ‹¬ν κ°λ° μ¤‘μ…λ‹λ‹¤.**  
> μ½”λ“κ°€ λΉ λ¥΄κ² λ°”λ€κ³  μμΌλ©°, κµ¬ν„λμ§€ μ•μ€ κΈ°λ¥λ„ μμµλ‹λ‹¤.

## π― ν”„λ΅μ νΈ λ©ν‘

- μ‹¤μ  μ΄μμ„ μ—Όλ‘μ— λ‘” **κ²°μ  μ‹μ¤ν… μ•„ν‚¤ν…μ² μ„¤κ³„**
- **AI κΈ°λ° μ‚¬κΈ° νƒμ§€ λ΅μ§**μ„ λ°±μ—”λ“μ— ν†µν•©
- **ν™•μ¥μ„±**, **λ³΄μ•μ„±**, **λ¨λ“ν™”**λ¥Ό κ³ λ ¤ν• λ°±μ—”λ“ μ„¤κ³„ λ° κµ¬ν„


## π“ API λ¬Έμ„ν™”

Swaggerλ¥Ό μ‚¬μ©ν•μ—¬ API λ¬Έμ„λ¥Ό μλ™μΌλ΅ μƒμ„±ν•κ³  κ΄€λ¦¬ν•©λ‹λ‹¤.

### API λ¬Έμ„ ν™•μΈν•κΈ°

```
http://localhost:8082/swagger-ui/index.html
```

### μ£Όμ” κΈ°λ¥

- API μ—”λ“ν¬μΈνΈ μλ™ λ¬Έμ„ν™”
- μ”μ²­/μ‘λ‹µ λ¨λΈ μ¤ν‚¤λ§ μλ™ μƒμ„±
- JWT μΈμ¦ ν…μ¤νΈ μ§€μ›
- μΈν„°λ™ν‹°λΈ API ν…μ¤νΈ ν™κ²½ μ κ³µ

### λ¬Έμ„ν™”λ API

- `User API`: μ‚¬μ©μ κ΄€λ ¨ μ—”λ“ν¬μΈνΈ
  - μ‚¬μ©μ ν”„λ΅ν•„ μ΅°ν
  - κ³„μ • μ‚­μ 

## π› οΈ μ‚¬μ© κΈ°μ  μ¤νƒ

| λ¶„λ¥ | κΈ°μ  |
|------|------|
| Language | Java 21 |
| Framework | Spring Boot 3.2.5, Spring Security |
| μ•„ν‚¤ν…μ² | MSA (Microservice Architecture) |
| λ©”μ‹μ§• | Apache Kafka |
| λ°μ΄ν„°λ² μ΄μ¤ | MySQL + JPA (Hibernate) |
| μΈμ¦/μΈκ°€ | JWT (Access/Refresh Token), Redis κΈ°λ° μ„Έμ… κ΄€λ¦¬ |
| ν†µμ‹  λ°©μ‹ | REST + gRPC νΌν•© κµ¬μ΅° |
| μΈν”„λΌ | Docker, DevContainer, Redis |


## π” μ„λΉ„μ¤ κ°„ ν†µμ‹  κµ¬μ΅°

```plaintext

π§Ύ [νμ›κ°€μ…]

auth-service
    β”β”€> gRPC νΈμ¶ β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€> user-service
    β”‚                           β””β”€ νμ› μ •λ³΄ μ €μ¥
    β””β”€> Kafka λ©”μ‹μ§€ (user.signup) β”€β”€> point-service
                                β””β”€ κ°€μ… μ¶•ν• ν¬μΈνΈ μ§€κΈ‰


π” [λ΅κ·ΈμΈ]

auth-service
    β”β”€> μ‚¬μ©μ μΈμ¦ μ„±κ³µ
    β”β”€> AccessToken + RefreshToken μƒμ„±
    β””β”€> RefreshToken μ €μ¥ β”€β”€β”€β”€> Redis (key: RT:{email})


π” [AccessToken μ¬λ°κΈ‰]

auth-service
    β”β”€> ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° RefreshToken μ „λ‹¬λ°›μ
    β”β”€> Redis μ—μ„ RT:{email} ν™•μΈ λ° μ ν¨μ„± κ²€μ¦
    β”β”€> μƒ AccessToken + μƒ RefreshToken λ°κΈ‰
    β””β”€> Redis λ®μ–΄μ“°κΈ° μ €μ¥ (RT:{email})


π›’ [κ²°μ  μ”μ²­]

payment-service
    β”β”€> κ²°μ  μ”μ²­ μμ‹ 
    β”β”€> Kafka λ©”μ‹μ§€ (payment.pay) β”€β”€> point-service
    β”‚                                 β””β”€ ν¬μΈνΈ μ°¨κ° μ²λ¦¬
    β””β”€> κ²°μ  μ™„λ£ μ‘λ‹µ λ°ν™


π—‘οΈ [νμ›νƒν‡΄]

user-service
    β”β”€> gRPC νΈμ¶ β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€> auth-service            
    β”‚                           β””β”€ μΈμ¦ μ •λ³΄ μ‚­μ 
    β””β”€> Kafka λ©”μ‹μ§€ (user.del) β”€β”€β”€β”€β”€β”€> point-service
                                β””β”€ ν¬μΈνΈ κΈ°λ΅ μ‚­μ 

```
